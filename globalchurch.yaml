# This file defines the Global Church Schema, which includes classes and slots for users and churches.
# It uses UUIDs for unique identifiers and includes various properties for user and church information.
# This schema is designed to facilitate data management for the Global.Church ecosystem.
# Generated by LinkML: https://linkml.io/linkml/

#to create the json file, run:  linkml generate json-schema globalchurch.yaml > globalchurch.json
#Open the folder:  cd /Users/trentonsikute/dev/globalchurch-schema
#Activate the virtual environment:  source .venv/bin/activate
id: https://global.church/schema
name: GlobalChurch

imports:
  - linkml:types

types:
  uuid:
    base: str
    uri: xsd:string
    description: "Universally unique identifier (RFC 4122)."
    pattern: '^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$'

prefixes:
  linkml: https://w3id.org/linkml/
  gc: https://global.church/schema/
  schema: http://schema.org/
default_prefix: gc
default_range: string

classes:
  User:
    description: "A registered platform user."
    mappings: [schema:Person]
    slots:
      - user_id
      - given_name
      - family_name
      - email
      - telephone
      - skills
      - primary_church
      - alternate_church
      - interests
      - faith_journey
    
  Church:
    description: "A distinct church congregation."
    mappings:
      - schema:Church            # The physical worship place
      - schema:Organization      # The entity that runs it
    slots:
      - church_id
      - gers_id
      - name
      - pipeline_status
      - latitude
      - longitude
      - address
  
  ChurchWebsite:
    description: "Raw scrape artifacts captured from the church root URL."
    slots:
      - church_id
      - root_scrape_text
      - root_scrape_buttons
      - root_scrape_check
      - root_candidates
      - candidates_text_and_links

  EnrichedData:
    description: "AI-enriched attributes extracted from the church website and socials."
    slots:
      - church_id
      - service_times
      - church_beliefs_url
      - trinitarian_beliefs
      - belief_type
      - scraped_email
      - instagram_url
      - youtube_url
      - service_languages
      - scraped_address
      - programs_offered
      - church_summary

  Overture:
    description: "Original place record as supplied by Overture Maps."
    slots:
      - gers_id
      - version
      - source
      - confidence
      - source_release

slots:
  user_id:
    identifier: true
    exact_mappings: [schema:identifier]
    range: uuid
    description: "Primary key for User (also referenced by other tables)."

  given_name:
    exact_mappings: [schema:givenName]
    description: "First name."

  family_name:
    exact_mappings: [schema:familyName]
    description: "Last name."

  email:
    exact_mappings: [schema:email]
    description: "Main contact email."

  telephone:
    exact_mappings: [schema:telephone]
    description: "Phone number (international format recommended)."

  skills:
    exact_mappings: [schema:skills] 
    description: "Comma-separated list of user skills."

  primary_church:
    range: uuid
    description: "FK → Church.church_id (the user’s primary church)."

  alternate_church:
    range: uuid
    description: "Optional FK → Church.church_id (secondary church)."

  interests:
    exact_mappings: [schema:interest]
    description: "Free-text interests or ministry areas."

  faith_journey:
    description: "Narrative text describing the user’s faith journey."

  church_id:
    identifier: true
    range: uuid
    description: "Primary key for Church; referenced by related tables."

  gers_id:
    description: "ID from the Government/Ecclesiastical Registry System (if available)."

  name:
    exact_mappings: [schema:name]
    description: "Official church name."

  pipeline_status:
    range: string
    description: "Enrichment pipeline stage (e.g., RAW, CLEAN, ENRICHED, VALIDATED)."

  latitude:
    range: float
    exact_mappings: [schema:latitude]
    description: "Geographic latitude (decimal degrees)."

  longitude:
    range: float
    exact_mappings: [schema:longitude]
    description: "Geographic longitude (decimal degrees)."

  address:
    range: string
    exact_mappings: [schema:address]
    description: "Physical street address."

  locality:
    exact_mappings: [schema:addressLocality]
    description: "City or locality of the church."

  region:
    exact_mappings: [schema:addressRegion]
    description: "State, province, or region."

  postal_code:
    exact_mappings: [schema:postalCode]
    description: "Postal / ZIP code."

  country:
    exact_mappings: [schema:addressCountry]
    description: "ISO-3166 country code."

  website:
    exact_mappings: [schema:url]
    range: uri
    description: "Full website URL."

  website_root:
    range: uri
    description: "Root URL (scheme + domain)."

  search_blob:
    description: "Concatenated text blob used for full-text search."

  openingHours:
    exact_mappings: [schema:openingHours, schema:openingHoursSpecification]
    description: "Opening hours information."

  keywords:
    exact_mappings: [schema:keywords]
    description: "Comma-separated keywords or tags."

  alternateName:
    exact_mappings: [schema:alternateName]
    description: "Alternate or colloquial church name."

  description:
    exact_mappings: [schema:description]
    description: "Long-form description of the church."

  social_media:
    description: "JSON or comma-separated social media handles."

  phone:
    exact_mappings: [schema:telephone]
    description: "Church phone number."

  root_scrape_text:
    description: "Visible text scraped from the root page."

  root_scrape_buttons:
    description: "Button texts captured on root page."

  root_scrape_check:
    description: "Checksum or status flag of the scrape."

  root_candidates:
    description: "Candidate URLs extracted from the root page."

  candidates_text_and_links:
    description: "Text and associated links for candidate pages."

  service_times:
    description: "Service times (free text)."

  church_beliefs_url:
    range: uri
    description: "URL of the statement of faith or similar statement of beliefs."

  trinitarian_beliefs:
    range: boolean
    description: "True if church affirms classical Trinitarian doctrine."

  belief_type:
    description: "Denomination / church type category."

  scraped_email:
    exact_mappings: [schema:email]
    description: "Email address extracted from site."

  instagram_url:
    exact_mappings: [schema:sameAs]
    range: uri
    description: "Instagram profile URL."

  youtube_url:
    exact_mappings: [schema:sameAs]
    range: uri
    description: "YouTube channel URL."

  service_languages:
    exact_mappings: [schema:inLanguage]
    description: "Languages in which services are offered."

  scraped_address:
    exact_mappings: [schema:address]
    description: "Postal address extracted from site."

  programs_offered:
    exact_mappings: [schema:service]
    description: "List of programs or ministries offered."

  church_summary:
    description: "Concise summary of the church, including key attributes and offerings."

  # --- Overture slots ---
  version:
    range: integer
    description: "Overture version number."

  source:
    description: "Source label of the Overture record."

  confidence:
    range: float
    description: "Confidence score (0–1)."

  source_release:
    description: "Overture release tag (e.g., 2024-05-15)."